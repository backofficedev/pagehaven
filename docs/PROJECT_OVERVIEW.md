# PageHaven - Project Overview

## ğŸ¯ Purpose & Goals

**PageHaven** is a **static website hosting platform** that allows users to deploy and manage static websites with custom subdomains and domains. Think of it as a simplified, self-hostable alternative to services like Netlify or Vercel, focused specifically on static content.

### Core Value Proposition

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PAGEHAVEN                               â”‚
â”‚                                                                 â”‚
â”‚   "Deploy static sites instantly with team collaboration"       â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚ Upload  â”‚ -> â”‚ Deploy  â”‚ -> â”‚  Host   â”‚ -> â”‚ Analyze â”‚     â”‚
â”‚   â”‚  Files  â”‚    â”‚  Site   â”‚    â”‚ Content â”‚    â”‚ Traffic â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                 â”‚
â”‚   Features:                                                     â”‚
â”‚   â€¢ Custom subdomains (yoursite.pagehaven.dev)                 â”‚
â”‚   â€¢ Custom domains with verification                            â”‚
â”‚   â€¢ Team collaboration (owner/admin/editor/viewer roles)        â”‚
â”‚   â€¢ Access control (public/password/private)                    â”‚
â”‚   â€¢ Deployment history & rollback                               â”‚
â”‚   â€¢ Analytics (views, visitors, bandwidth)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Entity Relationship Diagram (ERD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              AUTHENTICATION                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚    USER      â”‚       â”‚   SESSION    â”‚       â”‚   ACCOUNT    â”‚            â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚  â”‚ id (PK)      â”‚â”€â”€â”    â”‚ id (PK)      â”‚       â”‚ id (PK)      â”‚            â”‚
â”‚  â”‚ name         â”‚  â”‚    â”‚ token        â”‚       â”‚ accountId    â”‚            â”‚
â”‚  â”‚ email (UQ)   â”‚  â”‚    â”‚ expiresAt    â”‚       â”‚ providerId   â”‚            â”‚
â”‚  â”‚ emailVerifiedâ”‚  â”œâ”€â”€â”€<â”‚ userId (FK)  â”‚       â”‚ userId (FK)  â”‚>â”€â”€â”€â”       â”‚
â”‚  â”‚ image        â”‚  â”‚    â”‚ ipAddress    â”‚       â”‚ accessToken  â”‚    â”‚       â”‚
â”‚  â”‚ createdAt    â”‚  â”‚    â”‚ userAgent    â”‚       â”‚ password     â”‚    â”‚       â”‚
â”‚  â”‚ updatedAt    â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                               â”‚       â”‚
â”‚         â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚  â”‚ VERIFICATION â”‚                                                          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                          â”‚
â”‚  â”‚ id (PK)      â”‚                                                          â”‚
â”‚  â”‚ identifier   â”‚                                                          â”‚
â”‚  â”‚ value        â”‚                                                          â”‚
â”‚  â”‚ expiresAt    â”‚                                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              SITE MANAGEMENT                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚  â”‚      SITE        â”‚                                                       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                       â”‚
â”‚  â”‚ id (PK)          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ name             â”‚                                          â”‚            â”‚
â”‚  â”‚ subdomain (UQ)   â”‚                                          â”‚            â”‚
â”‚  â”‚ customDomain (UQ)â”‚                                          â”‚            â”‚
â”‚  â”‚ description      â”‚                                          â”‚            â”‚
â”‚  â”‚ activeDeployment â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚            â”‚
â”‚  â”‚ createdBy (FK)   â”‚>â”€â”€â”€â”€ USER                       â”‚        â”‚            â”‚
â”‚  â”‚ createdAt        â”‚                                 â”‚        â”‚            â”‚
â”‚  â”‚ updatedAt        â”‚                                 â”‚        â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚        â”‚            â”‚
â”‚           â”‚                                           â”‚        â”‚            â”‚
â”‚           â”‚                                           â–¼        â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚            â”‚
â”‚  â”‚                 â”‚              â”‚                      â”‚     â”‚            â”‚
â”‚  â–¼                 â–¼              â–¼                      â–¼     â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ SITE_MEMBER  â”‚  â”‚ SITE_ACCESS  â”‚  â”‚ SITE_INVITE  â”‚  â”‚  DEPLOYMENT  â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ id (PK)      â”‚  â”‚ id (PK)      â”‚  â”‚ id (PK)      â”‚  â”‚ id (PK)      â”‚    â”‚
â”‚  â”‚ siteId (FK)  â”‚  â”‚ siteId (FK)  â”‚  â”‚ siteId (FK)  â”‚  â”‚ siteId (FK)  â”‚<â”€â”€â”€â”˜
â”‚  â”‚ userId (FK)  â”‚  â”‚ accessType   â”‚  â”‚ email        â”‚  â”‚ storagePath  â”‚     
â”‚  â”‚ role         â”‚  â”‚ passwordHash â”‚  â”‚ userId (FK)  â”‚  â”‚ status       â”‚     
â”‚  â”‚ invitedBy    â”‚  â”‚ createdAt    â”‚  â”‚ invitedBy    â”‚  â”‚ fileCount    â”‚     
â”‚  â”‚ createdAt    â”‚  â”‚ updatedAt    â”‚  â”‚ expiresAt    â”‚  â”‚ totalSize    â”‚     
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ acceptedAt   â”‚  â”‚ commitHash   â”‚     
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ deployedBy   â”‚     
â”‚  Roles:                Access Types:                   â”‚ createdAt    â”‚     
â”‚  â€¢ owner               â€¢ public                        â”‚ finishedAt   â”‚     
â”‚  â€¢ admin               â€¢ password                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     
â”‚  â€¢ editor              â€¢ private                                            
â”‚  â€¢ viewer              â€¢ owner_only                    Status:              
â”‚                                                        â€¢ pending            
â”‚                                                        â€¢ processing         
â”‚                                                        â€¢ live               
â”‚                                                        â€¢ failed             
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ANALYTICS & DOMAINS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   SITE_ANALYTICS   â”‚              â”‚ DOMAIN_VERIFICATIONâ”‚                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚  â”‚ id (PK)            â”‚              â”‚ id (PK)            â”‚                 â”‚
â”‚  â”‚ siteId (FK)        â”‚>â”€â”€ SITE â”€â”€<  â”‚ siteId (FK)        â”‚                 â”‚
â”‚  â”‚ date               â”‚              â”‚ domain (UQ)        â”‚                 â”‚
â”‚  â”‚ path               â”‚              â”‚ verificationToken  â”‚                 â”‚
â”‚  â”‚ views              â”‚              â”‚ status             â”‚                 â”‚
â”‚  â”‚ uniqueVisitors     â”‚              â”‚ lastCheckedAt      â”‚                 â”‚
â”‚  â”‚ bandwidth          â”‚              â”‚ verifiedAt         â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                             â”‚
â”‚  Aggregated daily per path           Status: pending/verified/failed        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SYSTEM ARCHITECTURE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚    BROWSER      â”‚
                              â”‚   (End User)    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                  â”‚                  â”‚
                    â–¼                  â–¼                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   WEB APP        â”‚  â”‚   STATIC    â”‚  â”‚   API SERVER     â”‚
         â”‚   (React)        â”‚  â”‚   SITES     â”‚  â”‚   (Hono)         â”‚
         â”‚   :3001          â”‚  â”‚   (R2)      â”‚  â”‚   :3000          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                   â”‚                  â”‚
                  â”‚                   â”‚                  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         CLOUDFLARE WORKERS        â”‚
                    â”‚     (Edge Runtime Environment)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                       â”‚                       â”‚
              â–¼                       â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   SQLite/Turso   â”‚    â”‚   Cloudflare R2  â”‚    â”‚   Better-Auth    â”‚
    â”‚   (Database)     â”‚    â”‚   (File Storage) â”‚    â”‚   (Auth Layer)   â”‚
    â”‚                  â”‚    â”‚                  â”‚    â”‚                  â”‚
    â”‚   â€¢ Users        â”‚    â”‚   â€¢ Site files   â”‚    â”‚   â€¢ Sessions     â”‚
    â”‚   â€¢ Sites        â”‚    â”‚   â€¢ Deployments  â”‚    â”‚   â€¢ OAuth        â”‚
    â”‚   â€¢ Deployments  â”‚    â”‚   â€¢ Assets       â”‚    â”‚   â€¢ Passwords    â”‚
    â”‚   â€¢ Analytics    â”‚    â”‚                  â”‚    â”‚                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           TECHNOLOGY STACK                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  FRONTEND (apps/web)              BACKEND (apps/server)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ â€¢ React 19          â”‚          â”‚ â€¢ Hono              â”‚                  â”‚
â”‚  â”‚ â€¢ TanStack Router   â”‚   oRPC   â”‚ â€¢ oRPC              â”‚                  â”‚
â”‚  â”‚ â€¢ TanStack Query    â”‚ <â”€â”€â”€â”€â”€â”€> â”‚ â€¢ Drizzle ORM       â”‚                  â”‚
â”‚  â”‚ â€¢ TailwindCSS       â”‚          â”‚ â€¢ Better-Auth       â”‚                  â”‚
â”‚  â”‚ â€¢ shadcn/ui         â”‚          â”‚ â€¢ Zod validation    â”‚                  â”‚
â”‚  â”‚ â€¢ Lucide icons      â”‚          â”‚                     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                             â”‚
â”‚  SHARED PACKAGES                  INFRASTRUCTURE                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ packages/api        â”‚          â”‚ â€¢ Cloudflare Workersâ”‚                  â”‚
â”‚  â”‚ packages/auth       â”‚          â”‚ â€¢ Cloudflare D1     â”‚                  â”‚
â”‚  â”‚ packages/db         â”‚          â”‚ â€¢ Cloudflare R2     â”‚                  â”‚
â”‚  â”‚ packages/cli        â”‚          â”‚ â€¢ Alchemy (IaC)     â”‚                  â”‚
â”‚  â”‚ packages/config     â”‚          â”‚ â€¢ Turborepo         â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                             â”‚
â”‚  TOOLING                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Bun â€¢ TypeScript â€¢ Biome â€¢ Vitest â€¢ Playwright â€¢ Husky â€¢ Ultracite  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER WORKFLOWS                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. AUTHENTICATION FLOW
   â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ User â”‚â”€â”€â”€>â”‚ Sign Up â”‚â”€â”€â”€>â”‚ Verify   â”‚â”€â”€â”€>â”‚ Login  â”‚
   â””â”€â”€â”€â”€â”€â”€â”˜    â”‚ /Sign Inâ”‚    â”‚ Email    â”‚    â”‚ Sessionâ”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. SITE CREATION & DEPLOYMENT FLOW
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Create   â”‚â”€â”€â”€>â”‚ Configure â”‚â”€â”€â”€>â”‚ Upload   â”‚â”€â”€â”€>â”‚ Deploy   â”‚
   â”‚ Site     â”‚    â”‚ Access    â”‚    â”‚ Files    â”‚    â”‚ to R2    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                                 â”‚
        â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â–¼              â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ yoursite.pagehaven.dev   â”‚
   â”‚ or custom-domain.com     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. TEAM COLLABORATION FLOW
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Owner â”‚â”€â”€â”€>â”‚ Invite   â”‚â”€â”€â”€>â”‚ Member   â”‚â”€â”€â”€>â”‚ Role-    â”‚
   â”‚       â”‚    â”‚ Member   â”‚    â”‚ Accepts  â”‚    â”‚ Based    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ Access   â”‚
                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. VISITOR ACCESS FLOW (for hosted sites)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Visitor â”‚â”€â”€â”€>â”‚ Access   â”‚â”€â”€â”€>â”‚ Check    â”‚â”€â”€â”€>â”‚ Serve    â”‚
   â”‚ Request â”‚    â”‚ Check    â”‚    â”‚ Password â”‚    â”‚ Content  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ /Invite  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“… Development Timeline & Goals

### Daily Goals (Adjust dates as needed)

| Day        | Focus Area            | Goals                                                           |
| ---------- | --------------------- | --------------------------------------------------------------- |
| **Day 1**  | Setup & Auth          | âœ… Project scaffolding, âœ… Database schema, âœ… Authentication flow |
| **Day 2**  | Core API              | Site CRUD operations, Member management, Access control         |
| **Day 3**  | File Upload           | Upload router, R2 integration, Deployment pipeline              |
| **Day 4**  | Frontend - Auth       | Sign up/in forms, Protected routes, Session management          |
| **Day 5**  | Frontend - Dashboard  | Site list, Site creation, Site settings                         |
| **Day 6**  | Frontend - Deployment | File upload UI, Deployment status, History view                 |
| **Day 7**  | Static Serving        | Static site worker, Subdomain routing, Access enforcement       |
| **Day 8**  | Custom Domains        | Domain verification, DNS instructions, SSL setup                |
| **Day 9**  | Analytics             | View tracking, Analytics dashboard, Bandwidth monitoring        |
| **Day 10** | Polish & Testing      | E2E tests, Bug fixes, Performance optimization                  |
| **Day 11** | Documentation         | User docs, API docs, Deployment guide                           |
| **Day 12** | Final Demo            | Demo preparation, Presentation, Deployment to production        |

---

## ğŸ¯ MVP Feature Checklist

### Must Have (MVP)
- [x] User authentication (sign up, sign in, sign out)
- [ ] Create/edit/delete sites
- [ ] File upload and deployment
- [ ] Subdomain hosting (site.pagehaven.dev)
- [ ] Basic access control (public/private)
- [ ] Dashboard to manage sites

### Should Have
- [ ] Team collaboration (invite members)
- [ ] Role-based permissions
- [ ] Deployment history & rollback
- [ ] Password-protected sites
- [ ] Custom domain support

### Nice to Have
- [ ] Analytics dashboard
- [ ] CLI for deployments
- [ ] GitHub integration
- [ ] Preview deployments
- [ ] Asset optimization

---

## ğŸ”— API Routes Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API ENDPOINTS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  SITE ROUTER (/api/site)                                        â”‚
â”‚  â”œâ”€â”€ list          - Get all sites for current user             â”‚
â”‚  â”œâ”€â”€ get           - Get single site by ID                      â”‚
â”‚  â”œâ”€â”€ create        - Create new site                            â”‚
â”‚  â”œâ”€â”€ update        - Update site details                        â”‚
â”‚  â”œâ”€â”€ delete        - Delete site                                â”‚
â”‚  â”œâ”€â”€ checkSubdomain - Check subdomain availability              â”‚
â”‚  â”œâ”€â”€ addMember     - Add team member                            â”‚
â”‚  â”œâ”€â”€ removeMember  - Remove team member                         â”‚
â”‚  â””â”€â”€ listMembers   - List site members                          â”‚
â”‚                                                                 â”‚
â”‚  DEPLOYMENT ROUTER (/api/deployment)                            â”‚
â”‚  â”œâ”€â”€ list          - List deployments for site                  â”‚
â”‚  â”œâ”€â”€ get           - Get deployment details                     â”‚
â”‚  â”œâ”€â”€ create        - Create new deployment                      â”‚
â”‚  â”œâ”€â”€ promote       - Set deployment as active                   â”‚
â”‚  â””â”€â”€ delete        - Delete deployment                          â”‚
â”‚                                                                 â”‚
â”‚  UPLOAD ROUTER (/api/upload)                                    â”‚
â”‚  â”œâ”€â”€ getUploadUrl  - Get presigned R2 upload URL                â”‚
â”‚  â””â”€â”€ confirmUpload - Confirm file upload complete               â”‚
â”‚                                                                 â”‚
â”‚  ACCESS ROUTER (/api/access)                                    â”‚
â”‚  â”œâ”€â”€ get           - Get site access settings                   â”‚
â”‚  â”œâ”€â”€ update        - Update access type/password                â”‚
â”‚  â”œâ”€â”€ invite        - Invite visitor to private site             â”‚
â”‚  â””â”€â”€ revokeInvite  - Revoke visitor invite                      â”‚
â”‚                                                                 â”‚
â”‚  DOMAIN ROUTER (/api/domain)                                    â”‚
â”‚  â”œâ”€â”€ add           - Add custom domain                          â”‚
â”‚  â”œâ”€â”€ verify        - Verify domain ownership                    â”‚
â”‚  â”œâ”€â”€ remove        - Remove custom domain                       â”‚
â”‚  â””â”€â”€ getStatus     - Get verification status                    â”‚
â”‚                                                                 â”‚
â”‚  ANALYTICS ROUTER (/api/analytics)                              â”‚
â”‚  â”œâ”€â”€ getSummary    - Get site analytics summary                 â”‚
â”‚  â””â”€â”€ getDetails    - Get detailed analytics by path/date        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Project Structure

```
pagehaven/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/           # React frontend (TanStack Router)
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ components/   # UI components
â”‚   â”‚       â”œâ”€â”€ routes/       # File-based routing
â”‚   â”‚       â”œâ”€â”€ lib/          # Utilities & API client
â”‚   â”‚       â””â”€â”€ utils/        # Helper functions
â”‚   â”œâ”€â”€ server/        # Hono API server
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â””â”€â”€ lib/          # Server utilities
â”‚   â””â”€â”€ static/        # Static site serving worker
â”‚
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ api/           # oRPC routers & business logic
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ routers/      # API route handlers
â”‚   â”‚       â””â”€â”€ lib/          # Shared utilities
â”‚   â”œâ”€â”€ auth/          # Better-Auth configuration
â”‚   â”œâ”€â”€ db/            # Drizzle schema & migrations
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ schema/       # Database tables
â”‚   â”‚       â””â”€â”€ migrations/   # SQL migrations
â”‚   â”œâ”€â”€ cli/           # CLI tool for deployments
â”‚   â””â”€â”€ config/        # Shared TypeScript config
â”‚
â”œâ”€â”€ e2e/               # Playwright E2E tests
â””â”€â”€ docs/              # Documentation
```

---

*Generated for PageHaven project overview*
